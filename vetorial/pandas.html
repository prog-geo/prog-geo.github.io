

<!DOCTYPE html>
<html class="writer-html5" lang="pt-BR" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>9.4. Pandas &mdash; SER-347/CAP-419</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/table_styling.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ser-347.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  
    <link rel="canonical" href="https://ser-347.github.io/vetorial/pandas.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="next" title="9.5. GeoPandas" href="geopandas.html" />
    <link rel="prev" title="9.3. Leitura e Escrita de Dados Vetoriais com a biblioteca GDAL/OGR" href="ogr.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
          

          
            <a href="../index.html" class="icon icon-home"> SER-347/CAP-419
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Pesquisar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introdução à Programação com Dados Geoespaciais</a></li>
</ul>
<p class="caption"><span class="caption-text">Visão Geral do Curso:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../visao-geral.html">Visao Geral do Curso</a></li>
</ul>
<p class="caption"><span class="caption-text">Aulas:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../instalacao.html">1. Instalando e Configurando o Ambiente de Programação</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introducao-programacao.html">2. Introdução à Programação com a Linguagem Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../int_anaconda.html">3. Introdução ao Ambiente Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../int_jupyter_notebooks.html">4. IPython e Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matrizes.html">5. Matrizes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualizacao.html">6. Visualização de Dados</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imagens.html">7. Imagens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tipos_geometricos.html">8. Tipos e Operações Espaciais</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../vetorial.html">9. Manipulação de Dados Vetoriais</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introducao.html">9.1. Introdução</a></li>
<li class="toctree-l2"><a class="reference internal" href="fiona.html">9.2. Leitura e Escrita de Dados Vetoriais com a biblioteca Fiona</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogr.html">9.3. Leitura e Escrita de Dados Vetoriais com a biblioteca GDAL/OGR</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">9.4. Pandas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usando-o-pandas">9.4.1. Usando o Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#criando-uma-serie">9.4.2. Criando uma Série</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecionando-valores-da-serie">9.4.3. Selecionando Valores da Série</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acessando-a-estrutura-de-uma-serie">9.4.4. Acessando a Estrutura de uma Série</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ordenando-os-valores-de-uma-serie">9.4.5. Ordenando os Valores de uma Série</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotando-uma-serie">9.4.6. Plotando uma Série</a></li>
<li class="toctree-l3"><a class="reference internal" href="#criando-um-dataframe">9.4.7. Criando um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecionando-colunas-de-um-dataframe">9.4.8. Selecionando Colunas de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#acessando-a-estrutura-de-um-dataframe">9.4.9. Acessando a Estrutura de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecionando-valores-do-dataframe">9.4.10. Selecionando Valores do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterando-nas-colunas-e-linhas-de-um-dataframe">9.4.11. Iterando nas colunas e linhas de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#construindo-mascaras-booleanas-para-selecao-de-linhas">9.4.12. Construindo máscaras booleanas para seleção de linhas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leitura-de-arquivos-csv">9.4.13. Leitura de Arquivos CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analise-de-dados-com-o-pandas">9.4.14. Análise de Dados com o Pandas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="geopandas.html">9.5. GeoPandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="consideracoes.html">9.6. Considerações Finais</a></li>
<li class="toctree-l2"><a class="reference internal" href="referencias.html">9.7. Referências Bibliográficas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../variados.html">10. Tópicos Variados</a></li>
</ul>
<p class="caption"><span class="caption-text">Considerações Finais</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../consideracoes-finais.html">Considerações Finais</a></li>
</ul>
<p class="caption"><span class="caption-text">Referências Bibliográficas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencias.html">Referências Bibliográficas</a></li>
</ul>
<p class="caption"><span class="caption-text">Listas de Exercícios:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../listas.html">Listas de Exercícios</a></li>
</ul>
<p class="caption"><span class="caption-text">Lista de Projetos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../projetos.html">Lista dos Projetos Finais do Curso</a></li>
</ul>
<p class="caption"><span class="caption-text">Informações Gerais:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sites.html">Sobre o Site do Curso</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contato.html">Contato</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenca.html">Licença</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SER-347/CAP-419</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../vetorial.html"><span class="section-number">9. </span>Manipulação de Dados Vetoriais</a> &raquo;</li>
        
      <li><span class="section-number">9.4. </span>Pandas</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="geopandas.html" class="btn btn-neutral float-right" title="9.5. GeoPandas" accesskey="n">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="ogr.html" class="btn btn-neutral float-left" title="9.3. Leitura e Escrita de Dados Vetoriais com a biblioteca GDAL/OGR" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pandas">
<h1><span class="section-number">9.4. </span>Pandas<a class="headerlink" href="#pandas" title="Link permanente para este título">¶</a></h1>
<a class="reference internal image-reference" href="../_images/pandas.svg"><img alt="Pandas" class="align-right" src="../_images/pandas.svg" width="125" /></a>
<p>O <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> fornece duas estruturas de dados básicas: <code class="docutils literal notranslate"><span class="pre">Series</span></code> e <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, ambas apoiadas na estrutura <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> da biblioteca <code class="docutils literal notranslate"><span class="pre">NumPy</span></code>. Para estas estruturas, existem diversas operações de alto nível disponíveis, tais como: agregação de valores e visualização básica através da <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>.</p>
<p>Um objeto do tipo <code class="docutils literal notranslate"><span class="pre">Series</span></code> representa um vetor (ou <em>array</em> unidimensional) capaz de armazenar qualquer tipo de dado, como números inteiros, strings ou objetos como data e hora. Uma <code class="docutils literal notranslate"><span class="pre">série</span></code> possui dois eixos (<code class="docutils literal notranslate"><span class="pre">axis</span></code>), um usado para rotular cada valor do vetor (linhas) e outro para rotular os valores da séries (colunas). Os rótulos do <code class="docutils literal notranslate"><span class="pre">eixo-0</span></code> funcionam como um índice para os valores da série. O rótulo do <code class="docutils literal notranslate"><span class="pre">eixo-1</span></code> se refere à coluna com os valores da série. A <a class="reference internal" href="#pandas-series"><span class="std std-numref">Tabela 9.3</span></a> apresenta as características dessa estrutura de dados. Repare que há um eixo numérico na primeira coluna, com valores no intervalo <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">4]</span></code>, que forma a base de indexação dos valores da série (nomes de munícipio), e cuja coluna (<code class="docutils literal notranslate"><span class="pre">eixo-1</span></code>) possui um rótulo chamado <code class="docutils literal notranslate"><span class="pre">municipio</span></code>.</p>
<table class="styled-table docutils align-center" id="pandas-series">
<caption><span class="caption-number">Tabela 9.3 - </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Series</span></code></span><a class="headerlink" href="#pandas-series" title="Link Permanente para essa tabela">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="left-align head"></th>
<th class="left-align head"><p>municipio</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="left-align"><p>0</p></td>
<td class="left-align"><p>Sítio Novo Do Tocantins</p></td>
</tr>
<tr class="row-odd"><td class="left-align"><p>1</p></td>
<td class="left-align"><p>Ouro Preto</p></td>
</tr>
<tr class="row-even"><td class="left-align"><p>2</p></td>
<td class="left-align"><p>Mariana</p></td>
</tr>
<tr class="row-odd"><td class="left-align"><p>3</p></td>
<td class="left-align"><p>Araxá</p></td>
</tr>
<tr class="row-even"><td class="left-align"><p>4</p></td>
<td class="left-align"><p>Belo Horizonte</p></td>
</tr>
</tbody>
</table>
<p>O segundo tipo de estrutura introduzido pelo <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> é o <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, que representa uma matriz bidimensional, mais parecida com uma tabela, com capacidade de lidar com tipos heterogêneos, conforme mostrado na <a class="reference internal" href="#pandas-dataframe"><span class="std std-numref">Tabela 9.4</span></a>. Essa estrutura possui eixos rotulados (linhas e colunas). O <code class="docutils literal notranslate"><span class="pre">eixo-0</span></code>, dos índices, refere-se à primeira coluna, com os rótulos no intervalo <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">4]</span></code>. Esses valores podem ser usados para acessar os elementos de cada linha. O <code class="docutils literal notranslate"><span class="pre">eixo-1</span></code>, das colunas, possui os rótulos: <code class="docutils literal notranslate"><span class="pre">municipio</span></code>, <code class="docutils literal notranslate"><span class="pre">estado</span></code>, <code class="docutils literal notranslate"><span class="pre">regiao</span></code>, <code class="docutils literal notranslate"><span class="pre">pais</span></code>, <code class="docutils literal notranslate"><span class="pre">satelite</span></code>, <code class="docutils literal notranslate"><span class="pre">bioma</span></code>, <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> e <code class="docutils literal notranslate"><span class="pre">satelite_r</span></code>. Os rótulos do <code class="docutils literal notranslate"><span class="pre">eixo-1</span></code> se referem à identificação das séries das colunas.</p>
<table class="styled-table docutils align-center" id="pandas-dataframe">
<caption><span class="caption-number">Tabela 9.4 - </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></span><a class="headerlink" href="#pandas-dataframe" title="Link Permanente para essa tabela">¶</a></caption>
<colgroup>
<col style="width: 3%" />
<col style="width: 23%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 19%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="left-align head"></th>
<th class="left-align head"><p>municipio</p></th>
<th class="left-align head"><p>estado</p></th>
<th class="left-align head"><p>regiao</p></th>
<th class="left-align head"><p>pais</p></th>
<th class="left-align head"><p>satelite</p></th>
<th class="left-align head"><p>bioma</p></th>
<th class="left-align head"><p>timestamp</p></th>
<th class="left-align head"><p>satelite_r</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="left-align"><p>0</p></td>
<td class="left-align"><p>Sítio Novo Do Tocantins</p></td>
<td class="left-align"><p>Tocantins</p></td>
<td class="left-align"><p>N</p></td>
<td class="left-align"><p>Brazil</p></td>
<td class="left-align"><p>NPP_375</p></td>
<td class="left-align"><p>Cerrado</p></td>
<td class="left-align"><p>2016/02/12 17:05:45</p></td>
<td class="left-align"><p>f</p></td>
</tr>
<tr class="row-odd"><td class="left-align"><p>1</p></td>
<td class="left-align"><p>Sítio Novo Do Tocantins</p></td>
<td class="left-align"><p>Tocantins</p></td>
<td class="left-align"><p>N</p></td>
<td class="left-align"><p>Brazil</p></td>
<td class="left-align"><p>NPP_375</p></td>
<td class="left-align"><p>Cerrado</p></td>
<td class="left-align"><p>2016/07/17 04:00:00</p></td>
<td class="left-align"><p>f</p></td>
</tr>
<tr class="row-even"><td class="left-align"><p>2</p></td>
<td class="left-align"><p>Altamira</p></td>
<td class="left-align"><p>Pará</p></td>
<td class="left-align"><p>N</p></td>
<td class="left-align"><p>Brazil</p></td>
<td class="left-align"><p>AQUA_M-T</p></td>
<td class="left-align"><p>Amazonia</p></td>
<td class="left-align"><p>2016/01/15 16:40:14</p></td>
<td class="left-align"><p>t</p></td>
</tr>
<tr class="row-odd"><td class="left-align"><p>3</p></td>
<td class="left-align"><p>Altamira</p></td>
<td class="left-align"><p>Pará</p></td>
<td class="left-align"><p>N</p></td>
<td class="left-align"><p>Brazil</p></td>
<td class="left-align"><p>NPP_375</p></td>
<td class="left-align"><p>Amazonia</p></td>
<td class="left-align"><p>2016/01/15 16:40:14</p></td>
<td class="left-align"><p>t</p></td>
</tr>
<tr class="row-even"><td class="left-align"><p>4</p></td>
<td class="left-align"><p>Sítio Novo Do Tocantins</p></td>
<td class="left-align"><p>Tocantins</p></td>
<td class="left-align"><p>N</p></td>
<td class="left-align"><p>Brazil</p></td>
<td class="left-align"><p>NPP_375</p></td>
<td class="left-align"><p>Cerrado</p></td>
<td class="left-align"><p>2016/02/12 17:05:45</p></td>
<td class="left-align"><p>f</p></td>
</tr>
</tbody>
</table>
<div class="section" id="usando-o-pandas">
<h2><span class="section-number">9.4.1. </span>Usando o Pandas<a class="headerlink" href="#usando-o-pandas" title="Link permanente para este título">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Essa nota de aula pressupõe que você esteja usando o código dentro do ambiente Jupyter Notebook.</p>
</div>
<p>Por convenção importamos as funcionalidades do <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> da seguinte forma:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
<div class="section" id="criando-uma-serie">
<h2><span class="section-number">9.4.2. </span>Criando uma Série<a class="headerlink" href="#criando-uma-serie" title="Link permanente para este título">¶</a></h2>
<p>Vamos criar uma série semelhante aos dados apresentados na <a class="reference internal" href="#pandas-series"><span class="std std-numref">Tabela 9.3</span></a>, porém com os índices representados pelas letras de <code class="docutils literal notranslate"><span class="pre">a</span></code> a <code class="docutils literal notranslate"><span class="pre">e</span></code>, conforme o trecho de código abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dados</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Ouro Preto&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Mariana&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Araxá&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Belo Horizonte&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">indices</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span> <span class="p">]</span>

<span class="n">serie</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dados</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">indices</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Municipios&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>No ambiente de computação interativa do Jupyter, podemos apresentar os valores dessa série simplesmente criando uma célula com a seguinte expressão:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">c</span>                      <span class="n">Araxá</span>
<span class="n">a</span>             <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
</div>
<div class="section" id="selecionando-valores-da-serie">
<h2><span class="section-number">9.4.3. </span>Selecionando Valores da Série<a class="headerlink" href="#selecionando-valores-da-serie" title="Link permanente para este título">¶</a></h2>
<p>Podemos utilizar a função <code class="docutils literal notranslate"><span class="pre">head</span></code> para obter valores da série a partir do seu início:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Resultado:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>A função <code class="docutils literal notranslate"><span class="pre">tail</span></code> permite obter valores ao final da série:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span>             <span class="n">Araxá</span>
<span class="n">a</span>    <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>O <code class="docutils literal notranslate"><span class="pre">operador</span> <span class="pre">[]</span></code> (operador de indexação) permite acessar elementos específicos ou partes da série:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Belo Horizonte&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span>             <span class="n">Araxá</span>
<span class="n">a</span>    <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>O atributo <code class="docutils literal notranslate"><span class="pre">loc</span></code> permite acessar grupos de valores da série (linhas) através de rótulos ou por um <em>array</em> de valores lógicos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>    <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">b</span>        <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Vamos usar um <em>array</em> de valores lógicos para selecionar linhas alternadas da série através do atributo <code class="docutils literal notranslate"><span class="pre">loc</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">a</span>             <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>A propriedade <code class="docutils literal notranslate"><span class="pre">iloc</span></code> permite a seleção dos valores da série de maneira posicional, isto é, utilizamos números inteiros para especificar uma ou mais linhas a serem selecionadas. De maneira semelhante à propriedade <code class="docutils literal notranslate"><span class="pre">loc</span></code>, aceita um <em>array</em> de valores lógicos para seleção:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span>    <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">c</span>         <span class="n">Araxá</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
</div>
<div class="section" id="acessando-a-estrutura-de-uma-serie">
<h2><span class="section-number">9.4.4. </span>Acessando a Estrutura de uma Série<a class="headerlink" href="#acessando-a-estrutura-de-uma-serie" title="Link permanente para este título">¶</a></h2>
<p>Para acessar o eixo dos rótulos associados aos valores da série, utiliza-se o atributo <code class="docutils literal notranslate"><span class="pre">index</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Os valores da série podem ser acessados na forma de um <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> do <code class="docutils literal notranslate"><span class="pre">NumPy</span></code> através do atributo <code class="docutils literal notranslate"><span class="pre">values</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Ouro Preto&#39;</span><span class="p">,</span> <span class="s1">&#39;Mariana&#39;</span><span class="p">,</span> <span class="s1">&#39;Araxá&#39;</span><span class="p">,</span>
   <span class="s1">&#39;Belo Horizonte&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
<p>O retorno do atributo <code class="docutils literal notranslate"><span class="pre">values</span></code> é um <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, conforme podemos ver no exemplo abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">serie</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>
</pre></div>
</div>
</div>
<div class="section" id="ordenando-os-valores-de-uma-serie">
<h2><span class="section-number">9.4.5. </span>Ordenando os Valores de uma Série<a class="headerlink" href="#ordenando-os-valores-de-uma-serie" title="Link permanente para este título">¶</a></h2>
<p>Podemos ordenar a série pelos seus valores através da operação <code class="docutils literal notranslate"><span class="pre">sort_values</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span>                      <span class="n">Araxá</span>
<span class="n">a</span>             <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Ou, podemos ordenar a série pelos rótulos do índice dos valores:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>             <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">c</span>                      <span class="n">Araxá</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Note que as duas operações acima criam novas séries ordenadas. Para alterar a própria série, sem criar uma cópia, é necessário utilizar o parâmetro <code class="docutils literal notranslate"><span class="pre">inplace</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">serie</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span>                      <span class="n">Araxá</span>
<span class="n">a</span>             <span class="n">Belo</span> <span class="n">Horizonte</span>
<span class="n">d</span>                    <span class="n">Mariana</span>
<span class="n">b</span>                 <span class="n">Ouro</span> <span class="n">Preto</span>
<span class="n">e</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Municipios</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
</div>
<div class="section" id="plotando-uma-serie">
<h2><span class="section-number">9.4.6. </span>Plotando uma Série<a class="headerlink" href="#plotando-uma-serie" title="Link permanente para este título">¶</a></h2>
<p>Podemos construir gráficos rapidamente a partir das séries. O tipo <code class="docutils literal notranslate"><span class="pre">Series</span></code> possui uma operação geral denominada <code class="docutils literal notranslate"><span class="pre">plot</span></code>. O trecho de código abaixo mostra como utilizar esta operação para apresentar um gráfico de barras com o número de focos de incêndio na vegetação ao longo do período de 2008 a 2017.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ano</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2008</span><span class="p">,</span> <span class="mi">2009</span><span class="p">,</span> <span class="mi">2010</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2012</span><span class="p">,</span> <span class="mi">2013</span><span class="p">,</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">,</span> <span class="mi">2017</span> <span class="p">]</span>

<span class="n">num_focos</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">123</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="mi">249</span><span class="p">,</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">194</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">260</span> <span class="p">]</span>

<span class="n">serie_focos</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">num_focos</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">ano</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;#Focos x Ano&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serie_focos</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">serie_focos</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/series-plot-bar.png"><img alt="Plotando uma Série" class="align-center" src="../_images/series-plot-bar.png" style="width: 480px;" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Por padrão, o <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> utiliza a <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code> para gerar os gráficos. No entanto, é possível utilizar outras bibliotecas.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Consulte <a class="reference external" href="https://pandas.pydata.org/docs/reference/series.html#plotting">aqui</a> outras opções de construção de gráficos a partir de uma série.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para saber as demais propriedades e operações disponíveis para a estrutura <code class="docutils literal notranslate"><span class="pre">Series</span></code>, consulte a seguinte documentação: <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html">pandas.Series</a>.</p>
</div>
</div>
<div class="section" id="criando-um-dataframe">
<h2><span class="section-number">9.4.7. </span>Criando um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#criando-um-dataframe" title="Link permanente para este título">¶</a></h2>
<p>Para compreender a estrutura de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, vamos criar um, baseando-se nos dados da <a class="reference internal" href="#pandas-dataframe"><span class="std std-numref">Tabela 9.4</span></a>. Iremos omitir algumas colunas dessa tabela de propósito, para que possamos acrescentá-las mais adiante.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">municipios</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span> <span class="p">]</span>

<span class="n">estados</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="s1">&#39;Tocantins&#39;</span> <span class="p">]</span>

<span class="n">satelites</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;AQUA_M-T&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span> <span class="p">]</span>

<span class="n">biomas</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="s1">&#39;Cerrado&#39;</span> <span class="p">]</span>

<span class="n">timestamp</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;2016/02/12 17:05:45&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/07/17 04:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/02/12 17:05:45&#39;</span> <span class="p">]</span>

<span class="n">satelites_r</span> <span class="o">=</span> <span class="p">[</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span> <span class="p">]</span>

<span class="n">dados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;municipio&#39;</span><span class="p">:</span> <span class="n">municipios</span><span class="p">,</span>
    <span class="s1">&#39;estado&#39;</span><span class="p">:</span> <span class="n">estados</span><span class="p">,</span>
    <span class="s1">&#39;satelite&#39;</span><span class="p">:</span> <span class="n">satelites</span><span class="p">,</span>
    <span class="s1">&#39;bioma&#39;</span><span class="p">:</span> <span class="n">biomas</span><span class="p">,</span>
    <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s1">&#39;satelite_r&#39;</span><span class="p">:</span> <span class="n">satelites_r</span>
<span class="p">}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span> <span class="n">data</span><span class="o">=</span><span class="n">dados</span> <span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe.png"><img alt="DataFrame" src="../_images/pandas-dataframe.png" style="width: 800px;" /></a>
</div>
<div class="section" id="selecionando-colunas-de-um-dataframe">
<h2><span class="section-number">9.4.8. </span>Selecionando Colunas de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#selecionando-colunas-de-um-dataframe" title="Link permanente para este título">¶</a></h2>
<p>Para selecionar os valores da primeira coluna, rotulada com a string <code class="docutils literal notranslate"><span class="pre">municipio</span></code>, podemos utilizar o <code class="docutils literal notranslate"><span class="pre">operador</span> <span class="pre">[]</span></code> (operador de indexação) como mostrado abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;municipio&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">1</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">2</span>                   <span class="n">Altamira</span>
<span class="mi">3</span>                   <span class="n">Altamira</span>
<span class="mi">4</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">municipio</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>A mesma seleção pode ser realizada com o uso do operador <code class="docutils literal notranslate"><span class="pre">.</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">municipio</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">1</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">2</span>                   <span class="n">Altamira</span>
<span class="mi">3</span>                   <span class="n">Altamira</span>
<span class="mi">4</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">municipio</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Múltiplas colunas podem ser selecionadas. Podemos usar uma lista para especificar os rótulos das colunas desejada na seleção:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span> <span class="p">[</span><span class="s1">&#39;municipio&#39;</span><span class="p">,</span> <span class="s1">&#39;satelite&#39;</span> <span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-sel-columns.png"><img alt="DataFrame" src="../_images/pandas-dataframe-sel-columns.png" style="width: 300px;" /></a>
<p>Podemos usar o método <code class="docutils literal notranslate"><span class="pre">filter</span></code> para selecionar colunas baseada em seus nome ou rótulos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s1">&#39;sat&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-filter-columns.png"><img alt="DataFrame" src="../_images/pandas-dataframe-filter-columns.png" style="width: 250px;" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Além do parâmetro <code class="docutils literal notranslate"><span class="pre">like</span></code>, podemos usar uma expressão regular através do parâmetro <code class="docutils literal notranslate"><span class="pre">regex</span></code>.</p>
</div>
</div>
<div class="section" id="acessando-a-estrutura-de-um-dataframe">
<h2><span class="section-number">9.4.9. </span>Acessando a Estrutura de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#acessando-a-estrutura-de-um-dataframe" title="Link permanente para este título">¶</a></h2>
<p>Para acessar os índices ou rótulos das linhas, podemos utilizar a propriedade <code class="docutils literal notranslate"><span class="pre">index</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RangeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Os rótulos das colunas podem ser recuperados através da propriedade <code class="docutils literal notranslate"><span class="pre">columns</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;municipio&#39;</span><span class="p">,</span> <span class="s1">&#39;estado&#39;</span><span class="p">,</span> <span class="s1">&#39;satelite&#39;</span><span class="p">,</span> <span class="s1">&#39;bioma&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;satelite_r&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Existe uma operação chamada <code class="docutils literal notranslate"><span class="pre">keys()</span></code> que retorna esse mesmo objeto <code class="docutils literal notranslate"><span class="pre">Index</span></code>.</p>
</div>
<p>O atributo <code class="docutils literal notranslate"><span class="pre">values</span></code> retorna uma representação <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, conforme podemos ver no exemplo abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">(</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/02/12 17:05:45&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/07/17 04:00:00&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="s1">&#39;AQUA_M-T&#39;</span><span class="p">,</span> <span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
         <span class="p">[</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="s1">&#39;2016/02/12 17:05:45&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">]],</span>
       <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>O <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values">documento de referência</a> do <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> recomenda o uso da operação <code class="docutils literal notranslate"><span class="pre">to_numpy()</span></code> ao invés da propriedade <code class="docutils literal notranslate"><span class="pre">values</span></code>.</p>
</div>
<p>O atributo <code class="docutils literal notranslate"><span class="pre">axes</span></code> retorna uma lista com os índices dos eixos do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">axes</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="n">RangeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
  <span class="n">Index</span><span class="p">([</span><span class="s1">&#39;municipio&#39;</span><span class="p">,</span> <span class="s1">&#39;estado&#39;</span><span class="p">,</span> <span class="s1">&#39;satelite&#39;</span><span class="p">,</span> <span class="s1">&#39;bioma&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;satelite_r&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">]</span>
</pre></div>
</div>
<p>Podemos recuperar uma série com os tipos de dados de cada coluna. Nessa série, os índices serão os nomes das colunas e os valores, os tipos de dados de cada coluna:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">municipio</span>     <span class="nb">object</span>
<span class="n">estado</span>        <span class="nb">object</span>
<span class="n">satelite</span>      <span class="nb">object</span>
<span class="n">bioma</span>         <span class="nb">object</span>
<span class="n">timestamp</span>     <span class="nb">object</span>
<span class="n">satelite_r</span>      <span class="nb">bool</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Quando o <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> contém colunas de tipos diferentes (<em>mixed types</em>), o tipo definido pelo <code class="docutils literal notranslate"><span class="pre">dtype</span></code> é <code class="docutils literal notranslate"><span class="pre">object</span></code>.</p>
</div>
<p>As dimensões do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> podem ser obtidas através da propriedade <code class="docutils literal notranslate"><span class="pre">shape</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="selecionando-valores-do-dataframe">
<h2><span class="section-number">9.4.10. </span>Selecionando Valores do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#selecionando-valores-do-dataframe" title="Link permanente para este título">¶</a></h2>
<p>A operação <code class="docutils literal notranslate"><span class="pre">head</span></code> permite obter valores do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> a partir do seu início:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-head.png"><img alt="DataFrame" src="../_images/pandas-dataframe-head.png" style="width: 800px;" /></a>
<p>A operação <code class="docutils literal notranslate"><span class="pre">tail</span></code> obtém valores ao final do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-tail.png"><img alt="DataFrame" src="../_images/pandas-dataframe-tail.png" style="width: 800px;" /></a>
<p>Assim como na estrutura <code class="docutils literal notranslate"><span class="pre">Series</span></code>, podemos utilizar as propriedades <code class="docutils literal notranslate"><span class="pre">iloc</span></code> e <code class="docutils literal notranslate"><span class="pre">loc</span></code> para acessar grupos de linhas e colunas.</p>
<p>O trecho de código abaixo utiliza a propriedade <code class="docutils literal notranslate"><span class="pre">loc</span></code> para recuperar os valores compreendidos entre as linhas <code class="docutils literal notranslate"><span class="pre">1</span></code> e <code class="docutils literal notranslate"><span class="pre">3</span></code>, considerando apenas as colunas <code class="docutils literal notranslate"><span class="pre">satelite</span></code> e <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>  <span class="p">[</span> <span class="s1">&#39;satelite&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span> <span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-loc.png"><img alt="DataFrame" src="../_images/pandas-dataframe-loc.png" style="width: 350px;" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A propriedade <code class="docutils literal notranslate"><span class="pre">loc</span></code> utiliza os índices ou rótulos dos eixos das linhas e colunas como forma de endereçamento dos elementos. Já o operador <code class="docutils literal notranslate"><span class="pre">iloc</span></code> utiliza números inteiros correspondentes à posição dos eixos (linhas e colunas). No exemplo de <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> usado, os índices (rótulos) das linhas são números inteiros sequenciais e logo não há diferença na forma de acesso entre <code class="docutils literal notranslate"><span class="pre">loc</span></code> e <code class="docutils literal notranslate"><span class="pre">iloc</span></code> quando nos referimos às linhas desse exemplo. No entanto, para o eixo das colunas, temos diferença, conforme será visto abaixo.</p>
</div>
<p>Também podemos utilizar um <em>array</em> de valores lógicos nas propriedades <code class="docutils literal notranslate"><span class="pre">loc</span></code> e <code class="docutils literal notranslate"><span class="pre">iloc</span></code>. O trecho de código abaixo seleciona linhas alternadas do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="s1">&#39;satelite&#39;</span><span class="p">:</span><span class="s1">&#39;timestamp&#39;</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-loc-boolean.png"><img alt="DataFrame" src="../_images/pandas-dataframe-loc-boolean.png" style="width: 480px;" /></a>
<p>A propriedade <code class="docutils literal notranslate"><span class="pre">iloc</span></code> permite a seleção dos valores da série de maneira posicional, isto é, utilizamos números inteiros para especificar uma ou mais linhas e colunas a serem selecionadas. De maneira semelhante à propriedade <code class="docutils literal notranslate"><span class="pre">loc</span></code>, aceita um <em>array</em> de valores lógicos para seleção:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="mi">2</span><span class="p">:</span><span class="mi">5</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-loc-boolean.png"><img alt="DataFrame" src="../_images/pandas-dataframe-loc-boolean.png" style="width: 480px;" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Repare no exemplo acima que utilizamos um intervalo numérico (<code class="docutils literal notranslate"><span class="pre">2:5</span></code>) para definir as colunas que fariam parte do <em>slice</em> consultado.</p>
</div>
</div>
<div class="section" id="iterando-nas-colunas-e-linhas-de-um-dataframe">
<h2><span class="section-number">9.4.11. </span>Iterando nas colunas e linhas de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code><a class="headerlink" href="#iterando-nas-colunas-e-linhas-de-um-dataframe" title="Link permanente para este título">¶</a></h2>
<p>A operação <code class="docutils literal notranslate"><span class="pre">items</span></code> permite iterarmos nos conjuntos de valores de cada coluna, como se fossem uma série individual:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">rotulo</span><span class="p">,</span> <span class="n">serie</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Série da Coluna: </span><span class="si">{</span><span class="n">rotulo</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">serie</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--------</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Série</span> <span class="n">da</span> <span class="n">Coluna</span><span class="p">:</span> <span class="n">municipio</span>
<span class="mi">0</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">1</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="mi">2</span>                   <span class="n">Altamira</span>
<span class="mi">3</span>                   <span class="n">Altamira</span>
<span class="mi">4</span>    <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">municipio</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
<span class="o">--------</span>

<span class="n">Série</span> <span class="n">da</span> <span class="n">Coluna</span><span class="p">:</span> <span class="n">estado</span>
<span class="mi">0</span>    <span class="n">Tocantins</span>
<span class="mi">1</span>    <span class="n">Tocantins</span>
<span class="mi">2</span>         <span class="n">Pará</span>
<span class="mi">3</span>         <span class="n">Pará</span>
<span class="mi">4</span>    <span class="n">Tocantins</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">estado</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
<span class="o">--------</span>

<span class="o">...</span>

<span class="n">Série</span> <span class="n">da</span> <span class="n">Coluna</span><span class="p">:</span> <span class="n">satelite_r</span>
<span class="mi">0</span>    <span class="kc">False</span>
<span class="mi">1</span>    <span class="kc">False</span>
<span class="mi">2</span>     <span class="kc">True</span>
<span class="mi">3</span>    <span class="kc">False</span>
<span class="mi">4</span>    <span class="kc">False</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">satelite_r</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
<span class="o">--------</span>
</pre></div>
</div>
<p>O operador <code class="docutils literal notranslate"><span class="pre">iterrows()</span></code> permite iterarmos nas linhas do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> como se fossem uma série:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Série da Linha: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--------&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Série</span> <span class="n">da</span> <span class="n">Linha</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">municipio</span>     <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">estado</span>                      <span class="n">Tocantins</span>
<span class="n">satelite</span>                      <span class="n">NPP_375</span>
<span class="n">bioma</span>                         <span class="n">Cerrado</span>
<span class="n">timestamp</span>         <span class="mi">2016</span><span class="o">/</span><span class="mi">02</span><span class="o">/</span><span class="mi">12</span> <span class="mi">17</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span>
<span class="n">satelite_r</span>                      <span class="kc">False</span>
<span class="n">Name</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
<span class="o">--------</span>

<span class="o">...</span>

<span class="o">--------</span>

<span class="n">Série</span> <span class="n">da</span> <span class="n">Linha</span><span class="p">:</span> <span class="mi">4</span>
<span class="n">municipio</span>     <span class="n">Sítio</span> <span class="n">Novo</span> <span class="n">Do</span> <span class="n">Tocantins</span>
<span class="n">estado</span>                      <span class="n">Tocantins</span>
<span class="n">satelite</span>                      <span class="n">NPP_375</span>
<span class="n">bioma</span>                         <span class="n">Cerrado</span>
<span class="n">timestamp</span>         <span class="mi">2016</span><span class="o">/</span><span class="mi">02</span><span class="o">/</span><span class="mi">12</span> <span class="mi">17</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">45</span>
<span class="n">satelite_r</span>                      <span class="kc">False</span>
<span class="n">Name</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
<span class="o">--------</span>
</pre></div>
</div>
<p>Uma forma melhor de iterar nas linhas é através da operação <code class="docutils literal notranslate"><span class="pre">itertuples</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pandas</span><span class="p">(</span><span class="n">Index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">municipio</span><span class="o">=</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="n">estado</span><span class="o">=</span><span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="n">satelite</span><span class="o">=</span><span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="n">bioma</span><span class="o">=</span><span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s1">&#39;2016/02/12 17:05:45&#39;</span><span class="p">,</span> <span class="n">satelite_r</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">Pandas</span><span class="p">(</span><span class="n">Index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">municipio</span><span class="o">=</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="n">estado</span><span class="o">=</span><span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="n">satelite</span><span class="o">=</span><span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="n">bioma</span><span class="o">=</span><span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s1">&#39;2016/07/17 04:00:00&#39;</span><span class="p">,</span> <span class="n">satelite_r</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">Pandas</span><span class="p">(</span><span class="n">Index</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">municipio</span><span class="o">=</span><span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="n">estado</span><span class="o">=</span><span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="n">satelite</span><span class="o">=</span><span class="s1">&#39;AQUA_M-T&#39;</span><span class="p">,</span> <span class="n">bioma</span><span class="o">=</span><span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="n">satelite_r</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">Pandas</span><span class="p">(</span><span class="n">Index</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">municipio</span><span class="o">=</span><span class="s1">&#39;Altamira&#39;</span><span class="p">,</span> <span class="n">estado</span><span class="o">=</span><span class="s1">&#39;Pará&#39;</span><span class="p">,</span> <span class="n">satelite</span><span class="o">=</span><span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="n">bioma</span><span class="o">=</span><span class="s1">&#39;Amazônia&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s1">&#39;2016/01/15 16:40:14&#39;</span><span class="p">,</span> <span class="n">satelite_r</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">Pandas</span><span class="p">(</span><span class="n">Index</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">municipio</span><span class="o">=</span><span class="s1">&#39;Sítio Novo Do Tocantins&#39;</span><span class="p">,</span> <span class="n">estado</span><span class="o">=</span><span class="s1">&#39;Tocantins&#39;</span><span class="p">,</span> <span class="n">satelite</span><span class="o">=</span><span class="s1">&#39;NPP_375&#39;</span><span class="p">,</span> <span class="n">bioma</span><span class="o">=</span><span class="s1">&#39;Cerrado&#39;</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s1">&#39;2016/02/12 17:05:45&#39;</span><span class="p">,</span> <span class="n">satelite_r</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Repare que o índice da linha aparece como primeiro atributo da tupla retornada. Se informarmos o argumento <code class="docutils literal notranslate"><span class="pre">index=False</span></code> na operação <code class="docutils literal notranslate"><span class="pre">itertuples</span></code>, esse elemento será suprimido do resultado.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O parâmetro <code class="docutils literal notranslate"><span class="pre">name</span></code> pode ser usado para controlar o nome da tupla retornada, que por padrão utiliza o nome <code class="docutils literal notranslate"><span class="pre">Pandas</span></code>.</p>
</div>
</div>
<div class="section" id="construindo-mascaras-booleanas-para-selecao-de-linhas">
<h2><span class="section-number">9.4.12. </span>Construindo máscaras booleanas para seleção de linhas<a class="headerlink" href="#construindo-mascaras-booleanas-para-selecao-de-linhas" title="Link permanente para este título">¶</a></h2>
<p>Uma técnica útil para construir uma máscara de valores booleanos é utilizar expressões que retornem séries com valores booleanos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="s1">&#39;2016/02/02&#39;</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>     <span class="kc">True</span>
<span class="mi">1</span>     <span class="kc">True</span>
<span class="mi">2</span>    <span class="kc">False</span>
<span class="mi">3</span>    <span class="kc">False</span>
<span class="mi">4</span>     <span class="kc">True</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
</pre></div>
</div>
<p>Podemos usar uma expressão como acima para selecionar as linhas de um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="s1">&#39;2016/02/02&#39;</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-sel-rows.png"><img alt="DataFrame" src="../_images/pandas-dataframe-sel-rows.png" style="width: 800px;" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para saber as demais propriedades e operações disponíveis para a estrutura <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, consulte a seguinte documentação: <a class="reference external" href="https://pandas.pydata.org/docs/reference/frame.html">pandas.DataFrame</a>.</p>
</div>
</div>
<div class="section" id="leitura-de-arquivos-csv">
<h2><span class="section-number">9.4.13. </span>Leitura de Arquivos CSV<a class="headerlink" href="#leitura-de-arquivos-csv" title="Link permanente para este título">¶</a></h2>
<p>Para abrir um arquivo <code class="docutils literal notranslate"><span class="pre">CSV</span></code> basta utilizar a função <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/defpatterns.missing.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Baixe o arquivo <a class="reference external" href="https://1drv.ms/u/s!AtoTP-MfEUEDhL8HU8o2zRO7KmVodw?e=Ba6KOJ">defpatterns.missing.csv</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> fornece diversas funções de entrada/saída. Consulte o seguinte documento para maiores informações: <a class="reference external" href="https://pandas.pydata.org/docs/reference/io.html">Input/output</a>.</p>
</div>
</div>
<div class="section" id="analise-de-dados-com-o-pandas">
<h2><span class="section-number">9.4.14. </span>Análise de Dados com o Pandas<a class="headerlink" href="#analise-de-dados-com-o-pandas" title="Link permanente para este título">¶</a></h2>
<p>Vamos começar nossa análise, do conjunto de dados lido do arquivo <code class="docutils literal notranslate"><span class="pre">defpatterns.missing.csv</span></code>, por uma estatística descritiva:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="align-center figure align-default" id="pandas-describe">
<a class="reference internal image-reference" href="../_images/pandas-describe.png"><img alt="Saída da operação describe" src="../_images/pandas-describe.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Figura 9.3 - </span><span class="caption-text">Saída da operação <code class="docutils literal notranslate"><span class="pre">describe</span></code>.</span><a class="headerlink" href="#pandas-describe" title="Link Permanente para essa imagem">¶</a></p>
</div>
<p>A operação <code class="docutils literal notranslate"><span class="pre">describe</span></code> apresenta um sumário do conjunto de dados do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, mostrando sua tendência central, dispersão e forma. Essa operação cosidera apenas valores numéricos ou que possam ser transformados em valores numéricos, excluindo valores que não possam ser convertidos para números válidos. Veja que as colunas <code class="docutils literal notranslate"><span class="pre">object_id0</span></code> e <code class="docutils literal notranslate"><span class="pre">padrao</span></code> não foram consideradas pela operação. Além disso, existe um valor especial chamado <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<code class="docutils literal notranslate"><span class="pre">Not-a-Number</span></code>) que indica a ausência de valor naquela célula (<a class="reference internal" href="#pandas-nan"><span class="std std-numref">Figura 9.4</span></a>).</p>
<div class="align-center figure align-default" id="pandas-nan">
<a class="reference internal image-reference" href="../_images/pandas-nan.png"><img alt="DataFrame" src="../_images/pandas-nan.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Figura 9.4 - </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> com valores <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</span><a class="headerlink" href="#pandas-nan" title="Link Permanente para essa imagem">¶</a></p>
</div>
<p>Na saída mostrada na <a class="reference internal" href="#pandas-describe"><span class="std std-numref">Figura 9.3</span></a>, podemos ver que o resultado da operação <code class="docutils literal notranslate"><span class="pre">describe</span></code> inclui um sumário por coluna:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: Número de elementos da coluna com valores diferentes de <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: Média dos valores nas colunas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std</span></code>: Desvio padrão dos valores nas colunas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code>: Valor mínimo na coluna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code>: Valor máximo na coluna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">percentis</span></code>: primeiro quartil (25% das observações abaixo e 75% acima), segundo quartil (mediana, deixa 50% das observações abaixo e 50% das observações acima) e terceiro quartil (75% das observações abaixo e 25% acima).</p></li>
</ul>
<hr class="docutils" />
<p><strong>Q1.</strong> Quantos valores diferentes existem em cada coluna do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id0</span>    <span class="mi">1472</span>
<span class="n">Col</span>             <span class="mi">46</span>
<span class="n">Lin</span>             <span class="mi">32</span>
<span class="n">c_AWetric</span>      <span class="mi">464</span>
<span class="n">c_AWMetric</span>     <span class="mi">469</span>
<span class="n">c_CAMetric</span>     <span class="mi">465</span>
<span class="n">c_EDMetric</span>     <span class="mi">460</span>
<span class="n">c_LSMetric</span>     <span class="mi">470</span>
<span class="n">c_MPetric</span>      <span class="mi">464</span>
<span class="n">c_MPetri_1</span>     <span class="mi">467</span>
<span class="n">c_MPMetric</span>     <span class="mi">462</span>
<span class="n">c_MSMetric</span>     <span class="mi">463</span>
<span class="n">c_PDMetric</span>      <span class="mi">46</span>
<span class="n">c_PentLand</span>     <span class="mi">464</span>
<span class="n">c_PSMetric</span>     <span class="mi">406</span>
<span class="n">c_PSetric</span>      <span class="mi">403</span>
<span class="n">deci_class</span>       <span class="mi">5</span>
<span class="n">padrao</span>           <span class="mi">6</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A operação <code class="docutils literal notranslate"><span class="pre">nunique</span></code> conta o número de observações distintas e retorna uma série com essa contagem. Por padrão, a contagem é realizada ao longo do eixo das linhas (<code class="docutils literal notranslate"><span class="pre">axis=0</span></code> ou índice), como mostrado na saída acima. Podemos realizar a contagem no eixo da colunas usando o argumento <code class="docutils literal notranslate"><span class="pre">axis=1</span></code>.</p>
</div>
<hr class="docutils" />
<p><strong>Q2.</strong> Quantos valores diferentes existem para a coluna <code class="docutils literal notranslate"><span class="pre">padrao</span></code>?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">6</span>
</pre></div>
</div>
<p>Para obter os valores únicos podemos utilizar a operação <code class="docutils literal notranslate"><span class="pre">unique</span></code> como mostrado abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;floresta&#39;</span><span class="p">,</span> <span class="s1">&#39;difuso&#39;</span><span class="p">,</span> <span class="s1">&#39;geometrico&#39;</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">,</span>
       <span class="s1">&#39;multidirecional&#39;</span><span class="p">,</span> <span class="s1">&#39;consolidado&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Q3.</strong> Quantas linhas de cada <code class="docutils literal notranslate"><span class="pre">padrao</span></code> existem no <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>?</p>
<p>Nesse caso, precisamos realizar uma operação que agrupe as linha pelos valores da coluna <code class="docutils literal notranslate"><span class="pre">padrao</span></code> e então relize a contagem. O trecho de código abaixo utiliza o operador <code class="docutils literal notranslate"><span class="pre">groupby</span></code> para retornar um objeto que contém informação sobre grupos. Esse objeto é associado ao identificador <code class="docutils literal notranslate"><span class="pre">grupo_linhas</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grupo_linhas</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;padrao&#39;</span><span class="p">)</span>

<span class="n">grupo_linhas</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-group-by.png"><img alt="Group By" src="../_images/pandas-group-by.png" style="width: 800px;" /></a>
<p>Se você estiver interessado na contagem apenas de uma das colunas, pode usar a seguinte estratégia:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grupo_linhas</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">padrao</span>
<span class="n">consolidado</span>          <span class="mi">3</span>
<span class="n">difuso</span>             <span class="mi">301</span>
<span class="n">floresta</span>           <span class="mi">993</span>
<span class="n">geometrico</span>          <span class="mi">87</span>
<span class="n">linear</span>              <span class="mi">25</span>
<span class="n">multidirecional</span>     <span class="mi">63</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">padrao</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<p>Ou até mesmo usar a operação <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> do tipo <code class="docutils literal notranslate"><span class="pre">Series</span></code>, como mostrado abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">floresta</span>           <span class="mi">993</span>
<span class="n">difuso</span>             <span class="mi">301</span>
<span class="n">geometrico</span>          <span class="mi">87</span>
<span class="n">multidirecional</span>     <span class="mi">63</span>
<span class="n">linear</span>              <span class="mi">25</span>
<span class="n">consolidado</span>          <span class="mi">3</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">padrao</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A operação <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> retorna uma série em ordem descendente, de maneira que o primeiro elemento é o que ocorre com maior frequência.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para maiores informações sobre operações com objetos do tipo <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code>, consulte a <a class="reference external" href="https://pandas.pydata.org/docs/reference/groupby.html">seguinte documentação</a>.</p>
</div>
<hr class="docutils" />
<p><strong>Q4.</strong> Apresentar um gráfico de barras com a contagem de cada padrão:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">contagem</span> <span class="o">=</span> <span class="n">grupo_linhas</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="n">contagem</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-plot-bar.png"><img alt="Plot" src="../_images/pandas-dataframe-plot-bar.png" style="width: 480px;" /></a>
<hr class="docutils" />
<p><strong>Q5.</strong> Qual é o valor mínimo em cada coluna?</p>
<p>A operação <code class="docutils literal notranslate"><span class="pre">min</span></code> aplicada a um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> computa o valor mínimo para cada coluna:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id0</span>         <span class="n">C00L00</span>
<span class="n">Col</span>                     <span class="mi">0</span>
<span class="n">Lin</span>                     <span class="mi">0</span>
<span class="n">c_AWetric</span>               <span class="mi">0</span>
<span class="n">c_AWMetric</span>              <span class="mi">0</span>
<span class="o">...</span>
<span class="n">c_MPetri_1</span>       <span class="o">-</span><span class="mf">13.5893</span>
<span class="n">c_MPMetric</span>              <span class="mi">0</span>
<span class="o">...</span>
<span class="n">c_PSetric</span>               <span class="mi">0</span>
<span class="n">deci_class</span>              <span class="mi">0</span>
<span class="n">padrao</span>        <span class="n">consolidado</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Se quisermos computar o valor mínimo para uma coluna específica, como por exemplo a coluna <code class="docutils literal notranslate"><span class="pre">c_PSMetric</span></code>, podemos fazer uma seleção e, então utilizar a operação <code class="docutils literal notranslate"><span class="pre">min</span></code> como mostrado abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;c_PSMetric&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
<p>Resultado:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>No trecho de código acima usamos o <code class="docutils literal notranslate"><span class="pre">operador</span> <span class="pre">[]</span></code> para selecionar uma única coluna, o que resulta em um objeto do tipo <code class="docutils literal notranslate"><span class="pre">Series</span></code>:</p>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><strong>Q6.</strong> Qual o valor minímo de cada coluna desconsiderando as linhas com valores de <code class="docutils literal notranslate"><span class="pre">c_PSMetric</span></code> diferentes de zero?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span> <span class="n">patterns</span><span class="o">.</span><span class="n">c_PSMetric</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se estivéssemos interessados no valor mínimo apenas da coluna <code class="docutils literal notranslate"><span class="pre">c_PSMetric</span></code> considerando valores diferentes de zero, poderíamos usar a seguinte construção:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span> <span class="n">patterns</span><span class="o">.</span><span class="n">c_PSMetric</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">][</span><span class="s1">&#39;c_PSMetric&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><strong>Q7.</strong> Quantos valores estão faltando em cada coluna?</p>
<p>Os métodos <code class="docutils literal notranslate"><span class="pre">isnull</span></code> e <code class="docutils literal notranslate"><span class="pre">notnull</span></code> das estruturas de dados do <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> possibilitam trabalhar a ocorrência de valores nulos. Essas duas operações retornam uma máscara booleana, como pode ser visto na saída dos comandos abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-isnull.png"><img alt="isnull" src="../_images/pandas-dataframe-isnull.png" style="width: 800px;" /></a>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-notnull.png"><img alt="isnull" src="../_images/pandas-dataframe-notnull.png" style="width: 800px;" /></a>
<p>Para contar o número de células que não possuem valores em cada coluna, podemos utilizar a operação <code class="docutils literal notranslate"><span class="pre">isnull</span></code> para construir um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> com valores booleanos e em seguida aplicar o operador <code class="docutils literal notranslate"><span class="pre">sum</span></code>, conforme mostrado abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id0</span>     <span class="mi">0</span>
<span class="n">Col</span>            <span class="mi">0</span>
<span class="n">Lin</span>            <span class="mi">0</span>
<span class="n">c_AWetric</span>     <span class="mi">39</span>
<span class="n">c_AWMetric</span>    <span class="mi">30</span>
<span class="n">c_CAMetric</span>    <span class="mi">34</span>
<span class="n">c_EDMetric</span>    <span class="mi">39</span>
<span class="n">c_LSMetric</span>    <span class="mi">31</span>
<span class="n">c_MPetric</span>     <span class="mi">36</span>
<span class="n">c_MPetri_1</span>    <span class="mi">40</span>
<span class="n">c_MPMetric</span>    <span class="mi">48</span>
<span class="n">c_MSMetric</span>    <span class="mi">38</span>
<span class="n">c_PDMetric</span>    <span class="mi">32</span>
<span class="n">c_PentLand</span>    <span class="mi">43</span>
<span class="n">c_PSMetric</span>    <span class="mi">34</span>
<span class="n">c_PSetric</span>     <span class="mi">48</span>
<span class="n">deci_class</span>     <span class="mi">0</span>
<span class="n">padrao</span>         <span class="mi">0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<p>Outra solução para realizar a contagem acima seria obter o número total de linhas do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, com a função <code class="docutils literal notranslate"><span class="pre">len</span></code> e, então, subtrair este valor da série contendo a contagem de valores diferentes de <code class="docutils literal notranslate"><span class="pre">NaN</span></code> em cada coluna.</p>
<p>Portanto, o número de linhas do <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> pode ser obtido com a seguinte expressão:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">patterns</span><span class="p">)</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1472</span>
</pre></div>
</div>
<p>A série contendo a contagem de valores diferentes de <code class="docutils literal notranslate"><span class="pre">NaN</span></code> em cada coluna pode ser obtida com a seguinte expressão:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id0</span>    <span class="mi">1472</span>
<span class="n">Col</span>           <span class="mi">1472</span>
<span class="n">Lin</span>           <span class="mi">1472</span>
<span class="n">c_AWetric</span>     <span class="mi">1433</span>
<span class="o">...</span>
<span class="n">c_PSetric</span>     <span class="mi">1424</span>
<span class="n">deci_class</span>    <span class="mi">1472</span>
<span class="n">padrao</span>        <span class="mi">1472</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<p>Combinando as duas idéias na expressão abaixo, obtemos a quantidade de células com <code class="docutils literal notranslate"><span class="pre">NaN</span></code> em cada coluna:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">patterns</span><span class="p">)</span> <span class="o">-</span> <span class="n">patterns</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">object_id0</span>     <span class="mi">0</span>
<span class="n">Col</span>            <span class="mi">0</span>
<span class="n">Lin</span>            <span class="mi">0</span>
<span class="n">c_AWetric</span>     <span class="mi">39</span>
<span class="n">c_AWMetric</span>    <span class="mi">30</span>
<span class="o">...</span>
<span class="n">c_PSMetric</span>    <span class="mi">34</span>
<span class="n">c_PSetric</span>     <span class="mi">48</span>
<span class="n">deci_class</span>     <span class="mi">0</span>
<span class="n">padrao</span>         <span class="mi">0</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Existem várias formas de computar algumas informações. O exemplo anterior ainda poderia ser computado com a seguinte expressão:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">patterns</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="n">patterns</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><strong>Q8.</strong> Quais as linhas que possuem <code class="docutils literal notranslate"><span class="pre">NaN</span></code> na coluna <code class="docutils literal notranslate"><span class="pre">c_EDMetric</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span> <span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;c_EDMetric&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span> <span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-rows-nan.png"><img alt="isnull" src="../_images/pandas-dataframe-rows-nan.png" style="width: 800px;" /></a>
<hr class="docutils" />
<p><strong>Q9.</strong> Quantas observações estão completas, isto é, não estão faltando valores?</p>
<p>Através da operação <code class="docutils literal notranslate"><span class="pre">dropna</span></code> podemos criar um novo <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> contendo apenas colunas que não contenham valores <code class="docutils literal notranslate"><span class="pre">NaN</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ndf</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">ndf</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-dropna.png"><img alt="isnull" src="../_images/pandas-dataframe-dropna.png" style="width: 480px;" /></a>
<hr class="docutils" />
<p><strong>Q10.</strong> Quantas observações completas existem para cada valor de <code class="docutils literal notranslate"><span class="pre">padrao</span></code>?</p>
<p>No exemplo anterior, utilizamos a operação <code class="docutils literal notranslate"><span class="pre">dropna</span></code> ao longo do <code class="docutils literal notranslate"><span class="pre">eixo-1</span></code>, isto é, das colunas. Desta vez, usaremos a operação <code class="docutils literal notranslate"><span class="pre">dropna</span></code> para remover as linhas que contenham alguma observação com o valor <code class="docutils literal notranslate"><span class="pre">NaN</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ndf</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ndf</span><span class="p">[</span><span class="s1">&#39;padrao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
<p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">floresta</span>           <span class="mi">712</span>
<span class="n">difuso</span>             <span class="mi">212</span>
<span class="n">geometrico</span>          <span class="mi">63</span>
<span class="n">multidirecional</span>     <span class="mi">39</span>
<span class="n">linear</span>              <span class="mi">15</span>
<span class="n">consolidado</span>          <span class="mi">3</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">padrao</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Q11.</strong> Adicionar uma nova coluna chamada <code class="docutils literal notranslate"><span class="pre">idx</span></code> que seja o somatório dos valores das colunas <code class="docutils literal notranslate"><span class="pre">Lin</span></code> e <code class="docutils literal notranslate"><span class="pre">Col</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;Lin&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">patterns</span><span class="p">[</span><span class="s1">&#39;Col&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Como podemos observar na saída gerada pela expressão abaixo, a coluna <code class="docutils literal notranslate"><span class="pre">idx</span></code> foi adicionada ao nosso <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patterns</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>Saída:</p>
<a class="reference internal image-reference" href="../_images/pandas-dataframe-add-col.png"><img alt="isnull" src="../_images/pandas-dataframe-add-col.png" style="width: 800px;" /></a>
<hr class="docutils" />
<p><strong>Q12.</strong> Copiar um <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">copia_df</span> <span class="o">=</span> <span class="n">patterns</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="geopandas.html" class="btn btn-neutral float-right" title="9.5. GeoPandas" accesskey="n" rel="next">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ogr.html" class="btn btn-neutral float-left" title="9.3. Leitura e Escrita de Dados Vetoriais com a biblioteca GDAL/OGR" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2021, Gilberto Queiroz and Thales Körting.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-165908761-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>